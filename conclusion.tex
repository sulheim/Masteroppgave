%conclusion
%Short and to the point
%No discussion
%Further work

\section{Conclusion}
A program for motion correction, background subtraction and counting of phase-shift bubbles is successfully developed, validated and applied to a data set containing 125 ultrasound image sequences of 16 different prostate tumor xenografts. The program has been validated qualitatively against prejudices regarding the phase-shift bubble behaviour. Our results have been compared to the results from manual counting, performed by Andrew Healey~\cite{2014}. There is a very good correlation between the results obtained from automatic and manual counting. This support the credibility of the program.

A synthesized data set of in total 81 videos, based on three different backgrounds, was created. For each video, a chosen number of synthesized phase-shift bubbles was inserted at a random time and position, and with a random intensity. The random values were drawn from appropriate distributions based on the real data set. This provided a quantitative validation of the program performance. For number densities below \SI{\sim2}{bubbles\per\milli\meter\squared}, the relation between the inserted and the counted number density is close to linear (Figure \ref{Fig:counted_vs_inserted_inverse}). Above \SI{\sim2}{bubbles\per\milli\meter\squared} the program experience a saturation, and the accuracy decreases as the number density increases. 

The output of the developed program fulfil the project requirements, and include a video (.avi-file) displaying the counted phase-shift bubbles and a data file (.mat-file) containing number and number density of counted phase-shift bubbles. The quality of the video is better than existing software, in terms of motion correction and visualization of phase-shift bubbles.


\subsection{Further work}
If this program is to be applied on data with number density of phase-shift bubbles above \SI{2}{bubbles\per\milli\meter\squared}, effort should be put into reducing the experienced saturation. This saturation occurs because single bubbles are situated too close to each other, and therefore recognized as one large bubble. It should be possible to distinguish these separate bubbles by counting the number of local maxima within each bubble. This was tested without satisfying result, due to the inherent variations and noise present in ultrasound images. A more robust method may be achieved by smoothing the shape of the identified bubbles, before the number of local maxima is counted. Another option is to increasing the imaging frequency, and thereby the spatial resolution. Another obvious improvement of the program is to speed up the motion correction.
	
This program is based on linear contrast images. Some non-linear data were processed, but the model validation is based solely on linear contrast images. Based on our results, the algorithm seems to work equally well on non-linear and linear contrast images. But, in order to accurately determine the performance on non-linear images, a validation based on this imaging mode is necessary.

The high power ultrasound bursts turned out to produce unexpected results. More research and examination of single bubble intensity curves is necessary to understand the physics behind the large increase in counted phase-shift bubbles in non-linear imaging mode. 
